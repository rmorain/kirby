---

title: Insert To Database


keywords: fastai
sidebar: home_sidebar

summary: "Connects to database and inserts `sql_statements.txt'"
description: "Connects to database and inserts `sql_statements.txt'"
nb_path: "10_insert_to_database.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 10_insert_to_database.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># # Use if you created a text file when reading the wikidata file and </span>
<span class="c1"># now you want to insert the data to a database</span>

<span class="c1"># def text_to_database(database_path, text_path):</span>
<span class="c1">#     connection = sqlite3.connect(database_path) # Name of your database</span>
<span class="c1">#     sql_query = []</span>
<span class="c1">#     last_line = &#39;&#39;</span>
<span class="c1">#     crsr = connection.cursor()</span>
<span class="c1">#     count = 0</span>
<span class="c1">#     with open(text_path, &#39;r&#39;, encoding=&quot;utf-8&quot;) as file: # Name of the file where you wrote wikidata to</span>
<span class="c1">#         while True:</span>
<span class="c1">#             line = file.readline()</span>
<span class="c1">#             if not line:</span>
<span class="c1">#                 break</span>
<span class="c1">#             if line == &#39;\n&#39;:</span>
<span class="c1">#                 # print(&#39;Hello&#39;)</span>
<span class="c1">#                 # print(sql_query)</span>
<span class="c1">#                 file.readline()</span>
<span class="c1">#                 file.readline()</span>
<span class="c1">#                 file.readline()</span>
<span class="c1">#                 # sql_command = &#39;\&quot;\&quot;\&quot;{}\&quot;\&quot;\&quot;&#39;.format(sql_query)</span>
<span class="c1">#                 try:</span>
<span class="c1">#                     if len(sql_query) &lt; 2:</span>
<span class="c1">#                         continue</span>
<span class="c1">#                     if sql_query[-1][-1] == &#39;,&#39;:</span>
<span class="c1">#                         sql_query[-1] = sql_query[-1][:-1] + &#39;;&#39;</span>
<span class="c1">#                     crsr.execute(&#39;&#39;.join(sql_query))</span>
<span class="c1">#                 except Exception as e:</span>
<span class="c1">#                     print(e)</span>
<span class="c1">#                     for line in sql_query:</span>
<span class="c1">#                         print(line, end=&#39;&#39;)</span>
<span class="c1">#                     print(&#39;Something went wrong with the following &#39;)</span>
<span class="c1">#                     break</span>
<span class="c1">#                     connection.commit()</span>
<span class="c1">#                     sql_query.clear()</span>

<span class="c1">#             sql_query.append(line)</span>

<span class="c1"># # close the connection</span>
<span class="c1">#         connection.close()</span>

<span class="c1"># def main():</span>
<span class="c1">#     database_path = input(&#39;Enter the path to the database&#39;)</span>
<span class="c1">#     sql_statements = input(&#39;Enter the path to the .txt file containing the sql statements&#39;)</span>
<span class="c1">#     text_to_database(database_path, sql_statements)</span>
    
<span class="c1"># if __name__ == &#39;__main__&#39;:</span>
<span class="c1">#     main()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

